[tox]
envlist =
  test{,-devdeps}
requires =
  setuptools >= 30.3.0
  pip >= 19.3.1
  setuptools_scm
isolated_build = true

[testenv]
setenv =
  MPLBACKEND=agg
  JUPYTER_PLATFORM_DIRS=1
extras = test
changedir =
  test: .tmp/{envname}
deps =
  devdeps: pip install -U -i https://pypi.anaconda.org/astropy/simple astropy --pre
  devdeps: git+https://github.com/ejeschke/ginga.git#egg=ginga
commands =
  jupyter --paths
  pip freeze
  pytest --pyargs astrowidgets {toxinidir}/docs {posargs}
